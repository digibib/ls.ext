{{#values[inputValueIndex || 0].searchResult}}
{{#if !hidden}}
<div class="prop-search-results support-panel-content">
        {{#if items}}
        <div class="search-result-box" id="search-result">
            <div class="search-result-inner" >
            {{#each items:itemIndex}}
            <div class="search-result pure-g" class-exact-match="{{exactMatch}}" data-automation-id="{{uri}}" {{#if itemIndex === highestScoreIndex}}id="highest-score-item"{{/if}}>
                {{#if itemIndex === highestScoreIndex}}
                <script>
                    var maxAttempts = 20
                    function tryScroll () {
                        var target = document.getElementById('highest-score-item')
                        if (target) {
                            var resultList = document.getElementById('search-result')
                            var topPos = resultList.offsetTop;
                            document.main.$(resultList).animate({scrollTop: target.offsetTop - 20})
                        } else {
                            if (maxAttempts-- > 0) {
                                setTimeout(tryScroll, 500)
                            }
                        }
                    }
                    tryScroll()
                </script>
                {{/if}}
                <div class="pure-u-1">
                    <div class="pure-g">
                        <div class="pure-u-1-12">
                            {{#if widgetOptions.editWithTemplate || widgetOptions.enableEditResource}}
                                <a class="edit-resource" {{#if !highestScoreIndex || exactMatch}}tabindex="0"{{/if}}
                                   on-keyup="selectSearchableItem:{{.}},{{origin}},{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties)}}"
                                   on-click="selectSearchableItem:{{.}},{{origin}},{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties)}}"
                                   title="Rediger"/>
                            {{else}}
                                <a class="select-result-item" {{#if !highestScoreIndex || exactMatch}}tabindex="0"{{/if}}
                                   on-click="selectSearchableItem:{{.}},{{origin}},{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties)}}"
                                   on-keyup="selectSearchableItem:{{.}},{{origin}},{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties)}}"
                                   title="Velg"><span/></a>
                            {{/if}}
                        </div>
                        <div class="pure-u-5-6">
                            <p class="search-result-item-label">{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties)}}</p>
                            <p class="search-result-item-label">{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemLabelProperties2)}}</p>
                            <p class="search-result-item-detail-label">{{getSearchResultItemLabel(., config.search[current.accepted.selectedIndexType || selectedIndexType].resultItemDetailsLabelProperties)}}</p>
                        </div>

                        <div class="pure-u-1-12">
                            {{#subItems.length || loadWorksAsSubjectOfItem}}
                            <span class="toggle-show-sub-items" {{#config.search[selectedIndexType].subItemsExpandTooltip}}title="{{config.search[selectedIndexType].subItemsExpandTooltip}}"{{/}} on-click="toggleSubItem:{{loadWorksAsSubjectOfItem}},{{.}}">{{#toggleSubItem}}&#x25B2;{{else}}&#x25BC;{{/toggleSubItem}}</span>
                            {{/}}
                        </div>
                        {{>"additional-search-result-item-info-for-"+selectedIndexType}}
                        {{#toggleSubItem}}
                        <div class="work-items pure-u-1">
                            {{#subItems}}
                            <div class="search-result-subitem pure-g">
                                {{>subItemType}}
                                {{# widgetOptions.showSelectItem}}
                                    <span class="search-result-work-selector pure-u-2-24">
                                        <input class="select-work-radio" type="radio" checked="{{isChecked}}"
                                               on-click="selectSearchableItem:{{.}},{{origin}},{{items[itemIndex].name}},{subItem: true}"/>
                                    </span>
                                {{/}}
                            </div>
                            {{/work}}
                        </div>
                        {{/toggleSubItem}}
                    </div>
                </div>
                {{/each}}
            </div>
            </div>
         {{else}}
            <div class="search-result pure-g">
                <div class="pure-u-1">
                    Ingen treff
                </div>
            </div>
        {{/if}}
            {{#../../../widgetOptions.enableCreateNewResource.forms[(current.accepted.selectedIndexType || suggested.selectedIndexType || ../../../selectedIndexType)]}}
            <div class="search-result pure-u-1-1">
                        <div class="add-new-btn-row">
                            <div class="pure-u-1-3"></div>
                            <button on-click="showCreateNewResource:{{origin}}"
                               tabindex="0" class="pure-u-1-3 pure-button pure-button-primary support-panel-button">{{labelForCreateButton}}</button>
                        </div>
                    </div>
            {{/}}
</div>
{{/if}}
{{/searchResult}}
{{#if widgetOptions.enableCreateNewResource.showInputs === (inputValueIndex || 0) || widgetOptions.enableEditResource.showInputs === (inputValueIndex || 0)}}
{{#widgetOptions[widgetOptions.enableEditResource.showInputs === (inputValueIndex || 0) ? 'enableEditResource' : 'enableCreateNewResource'].forms[current.accepted.selectedIndexType || suggested.selectedIndexType || selectedIndexType]}}
    <div class="support-panel-content">
    <div class="search-result pure-u-1">
        {{#each inputs}}
            {{#if !(type === 'hidden-url-query-value')}}
                <div>
                    <span data-uri-escaped-label="{{encodeURI(./label)}}">{{./label}}:</span>
                    {{#each values}}
                        <span class="field" class-pure-u-1-1="{{!oneLiner}}">
                            {{>(readOnly ? "readonly-" : "") + type}}
                        </span>
                    {{/each}}
                </div>
            {{/if}}
        {{/each}}
        {{#if widgetOptions.enableCreateNewResource.showInputs === (inputValueIndex || 0)}}
            <span class="pure-u-1-1">
                <div class="add-new-btn-row">
                    <div class="pure-u-2-3"><a on-click="cancelEdit">Avbryt</a></div>
                    <button tabindex="0" class="pure-u-1-3 pure-button pure-button-primary"
                       on-click="createNewResource:{{searchResult.origin}}">Opprett</button>
                </div>
            </span>
        {{else}}
        <span class="pure-u-1-1">
                <div class="add-new-btn-row">
                    <div class="pure-u-1-3"><a on-click="deleteResource" class="delete-link">Slett</a></div>
                    <div class="pure-u-1-3"></div>
                    <button tabindex="0" class="pure-u-1-3 pure-button pure-button-primary"
                            on-click="cancelEdit">Ferdig</button>
                </div>
            </span>
        {{/if}}
    </div>
</div>
{{/}}
{{/if}}
